:root{
  --brand-green: #0B3D2E;
  --muted-bg: #F7FBF8;
  --card-bg: #ffffff;
  --radius: 12px;
  --accent: #007BFF;
  --text-strong:#0B3D2E;
  --return-bg: #0B3D2E;
  --return-text: #ffffff;
  --control-border: rgba(11,61,46,0.08);
  --activity-accent: rgba(11,61,46,0.06);
  --animation-ease: cubic-bezier(.2,.9,.2,1);
  --growing-blue: linear-gradient(180deg,#2fa0ff,#007bff);
  --grounded-green: linear-gradient(180deg,#48b174,#2e8b57);
  --drifting-gold: linear-gradient(180deg,#f0c95f,#d6a520);
  --surviving-red: linear-gradient(180deg,#f08f91,#d9534f);
}

/* Reset */
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  margin:0;padding:0;background:var(--muted-bg);color:var(--text-strong);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}

/* App reveal (smooth crossfade) */
.app-root{ opacity:0; transform: translateY(6px); transition: opacity 520ms var(--animation-ease), transform 520ms var(--animation-ease); }
.app-root.visible{ opacity:1; transform:none; }

/* Splash overlay - fade timing should complement app-root */
#splash-screen{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:var(--brand-green); z-index:9999; pointer-events:auto; transition: opacity 520ms var(--animation-ease); }
#splash-screen.hidden{ opacity:0; pointer-events:none; }
#splash-icon{ width:160px;height:160px; transform-origin:center; animation: splashGrow 1200ms var(--animation-ease) both; }
@keyframes splashGrow { 0%{transform:scale(1) rotate(0deg)} 60%{transform:scale(1.9) rotate(120deg)} 100%{transform:scale(2.8) rotate(240deg)} }

/* Hero */
.hero{ display:flex; align-items:center; gap:12px; max-width:820px; margin:12px auto 6px; padding:8px 16px; }
.hero-icon{ width:56px; height:56px; border-radius:10px; box-shadow:0 6px 18px rgba(6,20,12,0.06); object-fit:contain; }
.hero-text .hero-title{ margin:0; font-size:1.25rem; font-weight:800; color:var(--brand-green); }
.hero-sub{ margin:2px 0 0; color:rgba(11,61,46,0.7); font-size:0.95rem; }

/* Nav */
.site-nav{ display:flex; align-items:center; justify-content:center; padding:10px 14px; background: linear-gradient(180deg, var(--brand-green), #083126); color:white; box-shadow:0 6px 18px rgba(2,10,8,0.12); position:sticky; top:0; z-index:60; }
.nav-links{ list-style:none; display:flex; gap:26px; margin:0; padding:0 12px; }
.nav-links a{ color:white; text-decoration:none; font-weight:800; font-size:1.02rem; }

/* Page */
.page{ max-width:820px; margin:6px auto; padding:0 16px; padding-bottom:140px; }
.streak{ text-align:center; font-weight:700; margin:8px 0 12px; }

/* Card */
.card{ background:var(--card-bg); border-radius:var(--radius); padding:18px; border:1px solid rgba(11,61,46,0.06); box-shadow:0 6px 22px rgba(6,20,12,0.06); text-align:center; margin-bottom:18px; }

/* Compass */
.compass-wrap{ display:flex; justify-content:center; margin:8px 0 18px; position:relative; }
.compass-wrap::before{ content:''; position:absolute; inset:auto 50% auto 50%; width:84%; height:84%; max-width:420px; max-height:420px; transform:translate(-50%,-6%); background: radial-gradient(ellipse at center, rgba(11,61,46,0.06) 0%, rgba(11,61,46,0.02) 35%, transparent 60%); border-radius:50%; pointer-events:none; z-index:-1; }
svg{ width:320px; height:320px; max-width:92vw; display:block; }

/* Wedges */
.wedge{ cursor:pointer; transition: transform 220ms var(--animation-ease), filter 220ms var(--animation-ease), stroke-opacity 160ms linear; transform-origin:100px 100px; stroke-opacity:1; }
.wedge:hover, .wedge.bloom{ transform:scale(1.035); filter: drop-shadow(0 20px 40px rgba(0,0,0,0.12)); stroke-opacity:0; }
.wedge.bloom-strong{ transform:scale(1.07); filter: drop-shadow(0 36px 66px rgba(0,0,0,0.16)); stroke-opacity:0; z-index:5; }

/* Labels */
.compass-label{ font-size:16px; font-weight:800; fill:#ffffff; stroke:rgba(0,0,0,0.45); stroke-width:2; text-anchor:middle; dominant-baseline:middle; pointer-events:none; text-shadow:0 4px 10px rgba(0,0,0,0.28); }

/* Needle group + central pivot */
#needle-group{ transform-origin:100px 100px; transition: transform 320ms cubic-bezier(.2,.9,.2,1); will-change:transform; }
#compass-needle{ transition: transform 320ms cubic-bezier(.2,.9,.2,1); filter: drop-shadow(0 10px 18px rgba(0,0,0,0.08)); }

/* Idle animation */
@keyframes needleIdle{ 0% { transform: rotate(-1.6deg); } 50% { transform: rotate(1.6deg); } 100% { transform: rotate(-1.6deg); } }
#needle-group.idle{ animation: needleIdle 8s ease-in-out infinite; }

/* Needle spin */
.needle-spin{ animation: needleSpin 520ms cubic-bezier(.22,.9,.3,1) forwards; }
@keyframes needleSpin{ 0%{ transform: rotate(-18deg) scale(1); } 50%{ transform: rotate(20deg) scale(1.02); } 100%{ transform: rotate(0deg) scale(1); } }

/* Buttons */
.buttons{ margin:6px 0 22px; display:flex; flex-direction:column; gap:14px; align-items:center; }
.mode-button{ width:94%; max-width:720px; padding:14px 16px; border-radius:12px; border:none; color:white; font-weight:800; box-shadow:0 10px 26px rgba(6,20,12,0.12); text-align:center; font-size:1rem; }
.mode-button.growing{ background:var(--growing-blue); }
.mode-button.grounded{ background:var(--grounded-green); }
.mode-button.drifting{ background:var(--drifting-gold); color:#2e2a1e; }
.mode-button.surviving{ background:var(--surviving-red); }

/* Mode page */
.mode-page{ background:linear-gradient(180deg,#ffffff,#fbfffb); border-radius:18px; padding:26px; border:1px solid rgba(0,0,0,0.04); box-shadow:0 26px 60px rgba(6,20,12,0.08); margin:14px 0 60px; max-width:760px; margin-left:auto; margin-right:auto; }
.mode-page h2{ margin-top:0; font-size:2.0rem; color:var(--brand-green); }

/* Activity row */
.activity-row{ display:block; margin:14px 0; padding:12px; border-radius:12px; background: linear-gradient(180deg, rgba(11,61,46,0.02), rgba(255,255,255,0)); border-left:6px solid rgba(11,61,46,0.02); transition: transform .12s var(--animation-ease), box-shadow .12s var(--animation-ease); }
.activity-row:hover{ transform: translateY(-4px); box-shadow: 0 18px 38px rgba(6,20,12,0.08); border-left-color:var(--brand-green); }

/* Small devices */
@media (max-width:420px){
  .hero{ padding-left:12px; padding-right:12px; }
  .compass-label{ font-size:13px; stroke-width:1.6; }
  #splash-icon{ width:132px; height:132px; }
  .mode-page{ padding:20px; margin-bottom:36px; }
  .activity-note{ min-height:64px; max-width:100%; }
  .btn{ padding:8px 10px; }
  .history-chart-wrap{ height:220px; }
}