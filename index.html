<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>The Reset Compass</title>
<link rel="manifest" href="manifest.webmanifest">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="theme-color" content="#1C3B34"/>
<script async defer data-domain="evolutionofwellness-web.github.io/reset-compass" src="https://plausible.io/js/script.js"></script>
<style>
:root{
  --brand:#1C3B34; --beige:#F0E8D9; --ink:#1A1A1A; --muted:#6b6b6b; --border:#e7e7e7;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;background:#fff;color:var(--ink)}
header{position:sticky;top:0;background:var(--brand);color:#fff;padding:14px 16px;font-weight:600;z-index:2;text-align:center}
.wrap{max-width:820px;margin:0 auto;padding:16px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:14px;box-shadow:0 1px 2px rgba(0,0,0,.04)}
.card h3{margin:.2rem 0 .3rem}
.muted{color:var(--muted)}
.btn{display:inline-block;background:var(--brand);color:#fff;border:0;border-radius:10px;padding:10px 14px;font-weight:600;text-decoration:none;cursor:pointer}
.btn.ghost{background:transparent;color:var(--brand);border:1px solid var(--brand)}
.pill{display:inline-flex;align-items:center;gap:6px;background:var(--beige);color:var(--brand);padding:4px 8px;border-radius:999px;font-size:12px}
footer{padding:24px;color:#666;text-align:center;font-size:12px}

/* Compass */
.compass-wrap{display:flex;flex-direction:column;align-items:center;gap:8px}
svg.compass{width:320px;max-width:88vw;height:auto;display:block}
.label-row{display:grid;grid-template-columns:1fr 1fr;gap:8px;max-width:320px;margin-top:8px}
.label{border:1px dashed var(--border);border-radius:10px;padding:6px 8px;text-align:center;font-weight:600}
.label small{display:block;color:var(--muted);font-weight:500}

/* Popup */
#popup{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;z-index:10}
#popup .box{background:#fff;color:var(--brand);padding:22px;border-radius:12px;max-width:340px;text-align:center;border:1px solid var(--border)}
#popup .box p{margin:.5rem 0}
</style>
</head>
<body>
<header>The Reset Compass</header>
<div class="wrap" id="app"></div>
<footer>© 2025 Evolution of Wellness LLC • v1.0.0 • For educational purposes only. Not medical advice.</footer>

<script type="module">
/* -------- Data -------- */
const Modes = [
  {id:1,name:'Surviving',desc:"When you’re running on empty. Use the simplest resets that bring you back to life.",color:'#A94747',icon:'🩺'},
  {id:2,name:'Drifting',desc:'You’re okay but unfocused. Gently reconnect with what matters.',color:'#E6B450',icon:'🧭'},
  {id:3,name:'Grounded',desc:'You’re stable and want steady progress without burnout.',color:'#3B755F',icon:'🌿'},
  {id:4,name:'Growing',desc:'You’re ready to expand capacity intentionally and celebrate progress.',color:'#4C7EDC',icon:'🚀'},
];

const Tools = [
  // Surviving
  {id:1, mode_id:1, name:'The 3-Minute Reset', tag:'Quick mental + physical reboot', icon:'⏱️',
    summary:'Interrupt shutdown with one fast, full-body reset.',
    instructions:'1) Pause. 2) Breathe in 3s / out 6s for 2 minutes. 3) Seated reach + gentle twist for 1 minute.', minutes:3},
  {id:2, mode_id:1, name:'The Bare Minimum Menu', tag:'Eat simply when energy is low', icon:'🍎',
    summary:'Choose 1 protein + 1 carb + 1 fruit/veg you already have.',
    instructions:'Examples: eggs+toast+apple; yogurt+granola+berries; rotisserie chicken+rice+bagged salad. Pick one and eat.', minutes:5},
  {id:3, mode_id:1, name:'Your Energy Budget', tag:'Spend your energy wisely', icon:'⚡',
    summary:'Allocate today into Must / Might / No. Protect your limited fuel.',
    instructions:'Fill “Must” first (max 3 items). If energy rises, do one “Might.” Everything else = “No” today.', minutes:5},
  // Drifting
  {id:4, mode_id:2, name:'The Attention Anchor', tag:'Refocus scattered energy', icon:'🎯',
    summary:'Pick one word for how you want to feel today.',
    instructions:'Choose a word (Calm / Clear / Steady / Present / Light). Say it aloud. Return to it when distracted.', minutes:2},
  {id:5, mode_id:2, name:'The Daily Reconnect', tag:'One prompt, one minute', icon:'📝',
    summary:'Stay present with a single honest sentence.',
    instructions:'Pick a prompt: “What gave me energy?” / “What felt easiest?” / “What did I avoid?” Say or write one honest line.', minutes:3},
  {id:6, mode_id:2, name:'The Weekly Waypoint', tag:'Give your week direction', icon:'📅',
    summary:'A 5-minute reset on your natural week start.',
    instructions:'1) Name your current mode. 2) Choose one weekly anchor (e.g., outside 3×). 3) Set a reminder for next check-in.', minutes:5},
  // Grounded
  {id:7, mode_id:3, name:'The Energy Multiplier', tag:'Get more from what you already do', icon:'🔋',
    summary:'Identify 1–3 actions that give you energy and repeat them.',
    instructions:'List what already helps (sunlight, short walk, earlier lights). Repeat daily this week.', minutes:5},
  {id:8, mode_id:3, name:'The Habit Reflector', tag:'Notice what’s working', icon:'🪞',
    summary:'Weekly 3-min scan to protect helpful routines.',
    instructions:'Write: 1) What felt good? 2) Pattern to repeat? 3) What throws me off? Add one guardrail.', minutes:5},
  {id:9, mode_id:3, name:'Keystone Habit Builder', tag:'One small habit, big ripple', icon:'🧱',
    summary:'Choose one keystone habit and make it automatic.',
    instructions:'Use: “After I [trigger], I will [habit] in [location].” Check it off each day.', minutes:5},
  {id:10, mode_id:3, name:'Boundary Booster', tag:'Protect your energy + focus', icon:'🛡️',
    summary:'Keep growth from getting hijacked by distractions.',
    instructions:'Pick 3 priorities + 2 mini-boundaries. Write a reminder: “My energy is worth protecting because…” Optional daily check.', minutes:5},
  // Growing
  {id:11, mode_id:4, name:'The Expansion Map', tag:'Grow with intention', icon:'🌱',
    summary:'Define one area to expand, one to sustain, one to rest.',
    instructions:'Choose: Expand (e.g., movement minutes), Sustain (sleep window), Rest (pause an obligation). Review weekly.', minutes:10},
  {id:12, mode_id:4, name:'Skill Sprint', tag:'10-day micro-upgrade', icon:'🚴',
    summary:'A tiny, focused sprint that raises your ceiling without burnout.',
    instructions:'Pick one 10-minute skill or habit (mobility, meal prep, breathwork). Daily: start timer, do 10 min, mark done.', minutes:10},
  {id:13, mode_id:4, name:'Progress Pulse', tag:'Celebrate and iterate', icon:'📈',
    summary:'Quick weekly review to lock in gains and decide the next nudge.',
    instructions:'Log: Best win, Biggest drain, One tweak for next week. End with: “Next nudge = ____.”', minutes:4},
  {id:14, mode_id:4, name:'Social Support Loop', tag:'Don’t grow alone', icon:'🤝',
    summary:'Light accountability with one person.',
    instructions:'Choose a buddy. Agree on one weekly touch (Fri text / Sun walk). Add reminder. Celebrate small wins.', minutes:3},
];

const QuickWins = [
  {title:'Drink water', desc:'One full glass now. Feel the shift.', icon:'💧'},
  {title:'Step outside', desc:'3 minutes of daylight or fresh air.', icon:'🌞'},
  {title:'Stretch overhead', desc:'30 seconds. Shoulders down, jaw loose.', icon:'🤸'},
  {title:'Phone-free pause', desc:'Put it in another room for 5 minutes.', icon:'📵'},
  {title:'Tidy one surface', desc:'Desk, bag, or car door pocket.', icon:'🧽'},
  {title:'Message a friend', desc:'One genuine check-in.', icon:'💬'},
];

/* -------- Utilities -------- */
const app = document.getElementById('app');
const route = () => location.hash.replace('#','') || '/home';
const navActive = () => {}; // header is static
const logDidIt = (modeName, toolName) => {
  const key='rc_logs';
  const logs = JSON.parse(localStorage.getItem(key) || '[]');
  logs.push({ts:new Date().toISOString(), mode:modeName, tool:toolName});
  localStorage.setItem(key, JSON.stringify(logs));
  alert('Logged! ✅');
};

/* -------- Views -------- */
function Home(){
  // SVG compass with four clickable wedges
  app.innerHTML = `
    <div class="compass-wrap">
      <svg class="compass" viewBox="0 0 200 200" aria-label="Mode Compass">
        <!-- Background circle -->
        <circle cx="100" cy="100" r="96" fill="white" stroke="var(--brand)" stroke-width="2"/>
        <!-- Wedges -->
        <path d="M100,100 L100,4 A96,96 0 0,1 196,100 Z" fill="#A94747" opacity=".18" onclick="location.hash='#/mode/1'"></path>
        <path d="M100,100 L196,100 A96,96 0 0,1 100,196 Z" fill="#E6B450" opacity=".18" onclick="location.hash='#/mode/2'"></path>
        <path d="M100,100 L100,196 A96,96 0 0,1 4,100 Z" fill="#3B755F" opacity=".18" onclick="location.hash='#/mode/3'"></path>
        <path d="M100,100 L4,100 A96,96 0 0,1 100,4 Z" fill="#4C7EDC" opacity=".18" onclick="location.hash='#/mode/4'">
        </path>
        <!-- Center dot -->
        <circle cx="100" cy="100" r="6" fill="var(--brand)"></circle>
        <!-- Labels -->
        <text x="100" y="20" text-anchor="middle" fill="#A94747" font-size="10">Surviving</text>
        <text x="180" y="104" text-anchor="end" fill="#E6B450" font-size="10">Drifting</text>
        <text x="100" y="188" text-anchor="middle" fill="#3B755F" font-size="10">Grounded</text>
        <text x="20" y="104" text-anchor="start" fill="#4C7EDC" font-size="10">Growing</text>
      </svg>
      <div class="label-row">
        <div class="label">🩺 Surviving<small>Do the least that helps the most</small></div>
        <div class="label">🧭 Drifting<small>Small steps steer the ship</small></div>
        <div class="label">🌿 Grounded<small>Consistency beats intensity</small></div>
        <div class="label">🚀 Growing<small>Build from a full tank</small></div>
      </div>
    </div>
    <div class="card" style="margin-top:14px"><p class="muted">Tap a wedge to see quick, realistic steps that match your energy today.</p></div>
  `;
}

function ModeView(id){
  const m = Modes.find(x=>x.id==id);
  if(!m){ location.hash='#/home'; return;}
  const tools = Tools.filter(t=>t.mode_id==m.id);
  app.innerHTML = `
    <div class="pill" style="margin-bottom:8px;background:${m.color}20;color:${m.color}">${m.icon} ${m.name}</div>
    <h2>${m.name}</h2>
    <p class="muted" style="margin-top:-6px">${m.desc}</p>
    <div class="grid">
      ${tools.map(t=>`
        <div class="card">
          <div class="pill">${t.icon} ${t.tag}</div>
          <h3>${t.name}</h3>
          <p class="muted">${t.summary}</p>
          <div style="height:8px"></div>
          <a class="btn" href="#/tool/${t.id}">Open</a>
        </div>
      `).join('')}
    </div>
    <div style="height:12px"></div>
    <a class="btn ghost" href="#/home">Back to Compass</a>
  `;
}

function ToolView(id){
  const t = Tools.find(x=>x.id==id);
  const m = Modes.find(x=>x.id==t.mode_id);
  app.innerHTML = `
    <div class="pill" style="margin-bottom:8px;background:${m.color}20;color:${m.color}">${m.icon} ${m.name}</div>
    <h2>${t.icon} ${t.name}</h2>
    <div class="card"><p class="muted">${t.summary}</p></div>
    <div class="card">
      <h3>How to use</h3>
      <ul style="margin:0;padding-left:18px">${t.instructions.split('. ').map(s=>s.trim()).filter(Boolean).map(s=>`<li>${s.replace(/\.$/,'')}.</li>`).join('')}</ul>
      <div style="height:10px"></div>
      <button class="btn" onclick="(${logDidIt.toString()})('${m.name}','${t.name}')">Did it ✅</button>
      <a class="btn ghost" style="margin-left:8px" href="#/mode/${m.id}">Back</a>
    </div>
  `;
}

function Wins(){
  const logs = JSON.parse(localStorage.getItem('rc_logs')||'[]').slice(-10).reverse();
  app.innerHTML = `
    <h2>Quick Wins</h2>
    <div class="grid">
      ${QuickWins.map(w=>`
        <div class="card">
          <div class="pill">${w.icon} Quick Win</div>
          <h3>${w.title}</h3>
          <p class="muted">${w.desc}</p>
        </div>`).join('')}
    </div>
    <div style="height:12px"></div>
    <div class="card">
      <strong>Recent logs</strong>
      ${logs.length ? `<ul style="margin:8px 0 0 18px">${logs.map(l=>`<li>${new Date(l.ts).toLocaleString()} — <strong>${l.tool}</strong> (${l.mode})</li>`).join('')}</ul>` : `<p class="muted">No logs yet.</p>`}
      <div style="height:8px"></div>
      <a class="btn ghost" href="#/home">Back to Compass</a>
    </div>
  `;
}

function About(){
  app.innerHTML = `
    <h2>About</h2>
    <div class="card">
      <p><strong>The Reset Compass</strong> helps you take your health into your own hands immediately. Choose your current mode to see quick, realistic steps that match your energy today.</p>
      <p class="muted" style="font-size:12px">Disclaimer: This companion is for educational purposes only and is not medical advice. Consult a qualified provider before making changes to your health routine.</p>
      <p class="muted" style="font-size:12px">Support: evolutionofwellness8@gmail.com</p>
      <a class="btn ghost" href="#/home">Back to Compass</a>
    </div>
  `;
}

/* -------- Router -------- */
function router(){
  const r = location.hash.replace('#','') || '/home';
  if(r.startsWith('/mode/')) return ModeView(r.split('/')[2]);
  if(r.startsWith('/tool/')) return ToolView(r.split('/')[2]);
  if(r==='/wins') return Wins();
  if(r==='/about') return About();
  return Home();
}
window.addEventListener('hashchange', router);
window.addEventListener('load', ()=>{
  router();
  // Welcome popup (one-time)
  if(!localStorage.getItem('welcomeSeen')){
    const popup=document.createElement('div');
    popup.id='popup';
    popup.innerHTML=
`<div class="box">
      <h3>Welcome to The Reset Compass</h3>
      <p>This simple tool helps you take your health into your own hands immediately.<br>Choose your current mode to see quick, realistic steps that match your energy today.</p>
      <button class="btn" id="startBtn">Let's Start</button>
      <p style="font-size:12px;color:#6b6b6b;margin:6px 0 0">Your progress is saved locally on this device.</p>
    </div>`;
    document.body.appendChild(popup);
    document.getElementById('startBtn').onclick=()=>{
      localStorage.setItem('welcomeSeen','true'); popup.remove();
    };
  }
  // Register service worker
  if('serviceWorker' in navigator){ navigator.serviceWorker.register('sw.js').catch(()=>{}); }
});
</script>
</body>
</html>