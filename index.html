<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="The Reset Compass - Find your wellness mode and choose a short activity to reset" />
  <meta name="theme-color" content="#0B3D2E" />
  <title>The Reset Compass</title>

  <!-- Adsense (kept per previous requests) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9323656111800895"
     crossorigin="anonymous"></script>

  <link rel="stylesheet" href="style.css" />
  <!-- paste after: <link rel="stylesheet" href="style.css" /> -->
<link rel="stylesheet" href="css/cinematic.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/svg+xml" href="assets/images/compass.svg" />

  <script src="js/modes-loader.js" defer></script>
  <script src="script.js" defer></script>
  <script src="js/intro.js" defer></script>
</head>
<body class="page-compass">
  <header class="app-header" role="banner">
    <div class="app-header-top">
      <a class="home-link" id="homeBtn" href="./index.html" data-action="home" aria-label="Home ‚Äî Reset Compass">
        <h1 class="app-title">The Reset Compass</h1>
      </a>

      <div class="nav-dropdown">
        <button id="navMenuToggle" aria-haspopup="true" aria-expanded="false" aria-controls="navDropdown" aria-label="Open menu" class="nav-ellipsis">‚ò∞</button>
        <div id="navDropdown" class="nav-dropdown-menu" role="menu" aria-hidden="true">
          <button class="nav-dropdown-item" data-action="history" role="menuitem">History</button>
          <button class="nav-dropdown-item" data-action="ratings-reviews" role="menuitem">Ratings & Reviews</button>
          <button class="nav-dropdown-item" data-action="feedback" role="menuitem">Send Feedback</button>
          <a class="nav-dropdown-item" data-action="about" role="menuitem" href="about.html">About</a>
          <button class="nav-dropdown-item theme-toggle" data-action="toggle-theme" role="menuitem"><span id="themeToggleText">üåô Dark Mode</span></button>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <!-- PWA INSTALL BANNER -->
    <div id="pwaInstallBanner" class="pwa-banner" style="display:none;" role="alert">
      <div class="pwa-banner-content">
        <div class="pwa-banner-icon">üì±</div>
        <div class="pwa-banner-text">
          <strong>Install The Reset Compass</strong>
          <p>Add to your home screen for quick access anytime!</p>
        </div>
      </div>
      <div class="pwa-banner-actions">
        <button id="pwaInstallBtn" class="btn-primary btn-sm">Install</button>
        <button id="pwaDismissBtn" class="btn-secondary btn-sm">Not Now</button>
      </div>
    </div>

    <section class="page-section page-section--compass" aria-label="Compass section">
      <div class="streak-row">
        <div id="streakContainer" class="streak-container" aria-hidden="false">
          <div id="streakBadge" class="streak-badge" title="Daily streak: days in a row">Daily streak: üî• 0</div>
          <div id="achievementBadges" class="achievement-badges"></div>
        </div>
      </div>

      <div class="compass-wrap">
        <div class="compass-container" role="img" aria-label="Compass shape with four wedges" id="compassContainer">
          <img src="assets/images/compass.svg" alt="" aria-hidden="true" class="compass-image" id="compassImage" />
          <div id="compassWedges" class="compass-wedges" aria-hidden="true"></div>
          <div class="compass-arrow" id="compassArrow" aria-hidden="true" aria-label="Compass arrow">
            <svg viewBox="0 0 24 24" width="88" height="88" role="img" aria-hidden="true">
              <path d="M12 2 L16 12 L12 22 L8 12 Z" fill="#000" opacity="1" />
              <circle cx="12" cy="12" r="3" fill="#fff" />
            </svg>
          </div>
          <div id="compassRing" class="compass-ring" aria-hidden="false"></div>
        </div>
      </div>
    </section>

    <section class="page-section page-section--info" aria-hidden="false">
      <p class="hero-intro">Find your current wellness mode: pick a wedge inside the compass or choose a card below.</p>
    </section>

    <section class="page-section page-section--modes" aria-label="Wellness Modes">
      <h2 class="section-title">Choose Your Mode</h2>

      <div class="mode-grid" id="modesGrid" role="list" aria-live="polite"></div>
      <div class="quick-wins-block" role="region" aria-label="Quick Wins section">
        <button id="quickWinsLink" class="nav-btn quick-wins-cta" data-action="quick-wins">‚ö° Quick Wins</button>
        <p class="quick-wins-note">Quick Wins are one-step actions you can do immediately to shift your focus, energy, or mood. Tap a Quick Win to complete it fast. (No daily limit.)</p>
      </div>

      <div class="rate-cta-card" onclick="document.querySelector('[data-action=ratings-reviews]').click()">
        <div class="rate-cta-content">
          <div class="rate-cta-icon">‚≠ê</div>
          <div class="rate-cta-text">
            <h3>Enjoying The Reset Compass?</h3>
            <p>Rate the app and share your experience!</p>
          </div>
        </div>
        <button class="rate-cta-btn" type="button">Rate Now</button>
      </div>
    </section>

    <footer class="app-footer">
      <div class="ad-slot" aria-label="Advertisement">
        <p class="ad-placeholder">Ad Placeholder</p>
      </div>
      <p class="footer-text"><small>&copy; 2025 Evolution of Wellness ‚Äî The Reset Compass</small></p>
    </footer>
  </main>

  <!-- MODE DIALOG -->
  <dialog id="modeDialog" class="mode-dialog" aria-labelledby="modeDialogTitle">
    <div class="dialog-content">
      <button class="dialog-close" aria-label="Close dialog">&times;</button>

      <div class="mode-header" id="modeDialogHeader">
        <div class="accent" id="modeAccent" aria-hidden="true"></div>
        <div class="mode-head-inner">
          <h2 id="modeDialogTitle" class="mode-title"></h2>
          <p id="dialogModeDescription" class="mode-description"></p>
        </div>
      </div>

      <div class="mode-actions">
        <h3>Activities</h3>
        <ul id="dialogQuickWins" class="quick-wins-list" role="list"></ul>
        <p class="mode-note-help">Select an activity and add optional notes before completing.</p>
      </div>

      <div class="dialog-actions">
        <button id="startResetBtn" class="btn-primary" disabled>Complete Selected</button>
        <button class="btn-secondary dialog-cancel">Cancel</button>
      </div>
    </div>
  </dialog>

  <!-- QUICK WINS DIALOG -->
  <dialog id="quickWinsDialog" class="mode-dialog" aria-labelledby="quickWinsTitle">
    <div class="dialog-content">
      <button class="dialog-close" aria-label="Close dialog">&times;</button>
      <h2 id="quickWinsTitle">Quick Wins</h2>
      <p class="mode-description">One-step actions you can do now to quickly change your focus, energy, or mood. Tap to select and complete immediately.</p>
      <ul id="globalQuickWins" class="quick-wins-list" role="list"></ul>

      <div class="dialog-actions">
        <button id="startQuickWinBtn" class="btn-primary" disabled>Complete Selected</button>
        <button class="btn-secondary dialog-cancel">Close</button>
      </div>
    </div>
  </dialog>

  <!-- HISTORY DIALOG -->
  <dialog id="historyDialog" class="history-dialog" aria-labelledby="historyDialogTitle">
    <div class="dialog-content">
      <button class="dialog-close" aria-label="Close dialog">&times;</button>
      <h2 id="historyDialogTitle">Your Reset History</h2>

      <div id="historyStats" class="history-stats"></div>
      <div class="history-chart-row">
        <canvas id="historyDonut" width="260" height="260" aria-label="Mode distribution chart"></canvas>
      </div>
      <div id="historyTimeline" class="history-timeline"></div>

      <div class="dialog-actions">
        <button id="exportHistoryBtn" class="btn-secondary">Export JSON</button>
        <button id="clearHistoryBtn" class="btn-danger">Clear History</button>
        <button class="btn-secondary dialog-cancel">Close</button>
      </div>
    </div>
  </dialog>

  <!-- COME BACK DIALOG -->
  <dialog id="comeBackDialog" class="mode-dialog" aria-labelledby="comeBackTitle">
    <div class="dialog-content">
      <h2 id="comeBackTitle">Nice work!</h2>
      <p id="comeBackMsg">You've completed a mode today ‚Äî come back tomorrow to continue your streak. Quick Wins are still available anytime.</p>
      <div class="dialog-actions">
        <button class="btn-primary dialog-close">OK</button>
      </div>
    </div>
  </dialog>

  <!-- FEEDBACK DIALOG -->
  <dialog id="feedbackDialog" class="mode-dialog" aria-labelledby="feedbackTitle">
    <div class="dialog-content">
      <button class="dialog-close" aria-label="Close dialog">&times;</button>
      <h2 id="feedbackTitle">Send Feedback</h2>
      <p class="mode-description">Your feedback helps make The Reset Compass better. Share your thoughts, ideas, or report issues.</p>
      
      <form name="feedback" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" class="feedback-form">
        <input type="hidden" name="form-name" value="feedback" />
        <p hidden>
          <label>Don't fill this out: <input name="bot-field" /></label>
        </p>
        
        <div class="form-group">
          <label for="feedbackName">Name (optional)</label>
          <input type="text" id="feedbackName" name="name" class="form-input" placeholder="Your name">
        </div>
        
        <div class="form-group">
          <label for="feedbackEmail">Email (optional)</label>
          <input type="email" id="feedbackEmail" name="email" class="form-input" placeholder="your@email.com">
        </div>
        
        <div class="form-group">
          <label for="feedbackType">Feedback Type</label>
          <select id="feedbackType" name="type" class="form-input" required>
            <option value="">Select type...</option>
            <option value="bug">Bug Report</option>
            <option value="feature">Feature Request</option>
            <option value="improvement">Improvement Idea</option>
            <option value="general">General Feedback</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="feedbackMessage">Your Feedback *</label>
          <textarea id="feedbackMessage" name="message" class="form-textarea" rows="6" required placeholder="Share your thoughts..."></textarea>
        </div>
        
        <div class="dialog-actions">
          <button type="submit" class="btn-primary">Send Feedback</button>
          <button type="button" class="btn-secondary dialog-cancel">Cancel</button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- RATINGS & REVIEWS DIALOG -->
  <dialog id="ratingsDialog" class="mode-dialog ratings-dialog" aria-labelledby="ratingsTitle">
    <div class="dialog-content">
      <button class="dialog-close" aria-label="Close dialog">&times;</button>
      <h2 id="ratingsTitle">‚≠ê Rate & Review</h2>
      <p class="mode-description">Share your experience with The Reset Compass. Your review will be visible to other users.</p>
      
      <form name="reviews" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" class="review-form" id="reviewForm">
        <input type="hidden" name="form-name" value="reviews" />
        <p hidden>
          <label>Don't fill this out: <input name="bot-field" /></label>
        </p>
        
        <div class="form-group">
          <label>Your Rating *</label>
          <div class="star-rating" id="starRating">
            <button type="button" class="star" data-rating="1">‚òÖ</button>
            <button type="button" class="star" data-rating="2">‚òÖ</button>
            <button type="button" class="star" data-rating="3">‚òÖ</button>
            <button type="button" class="star" data-rating="4">‚òÖ</button>
            <button type="button" class="star" data-rating="5">‚òÖ</button>
          </div>
          <input type="hidden" name="rating" id="ratingValue" required />
        </div>
        
        <div class="form-group">
          <label for="reviewName">Your Name *</label>
          <input type="text" id="reviewName" name="name" class="form-input" placeholder="Your name" required>
        </div>
        
        <div class="form-group">
          <label for="reviewText">Your Review *</label>
          <textarea id="reviewText" name="review" class="form-textarea" rows="4" required placeholder="What do you think about The Reset Compass?"></textarea>
        </div>
        
        <div class="dialog-actions">
          <button type="submit" class="btn-primary">Submit Review</button>
          <button type="button" class="btn-secondary dialog-cancel">Cancel</button>
        </div>
      </form>
      
      <div class="reviews-section">
        <h3>Recent Reviews</h3>
        <div id="reviewsList" class="reviews-list">
          <p class="no-reviews">No reviews yet. Be the first to review!</p>
        </div>
      </div>
    </div>
  </dialog>
</body>
</html>

<system-reminder>
Whenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.
</system-reminder>
