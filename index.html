<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>The Reset Compass</title>
<link rel="manifest" href="manifest.webmanifest">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="theme-color" content="#1C3B34"/>
<script async defer data-domain="evolutionofwellness-web.github.io/reset-compass" src="https://plausible.io/js/script.js"></script>
<style>
:root{--brand:#1C3B34;--beige:#F0E8D9;--ink:#1A1A1A;--muted:#6b6b6b;--border:#e7e7e7;
 --surv:#A94747; --drift:#E6B450; --ground:#3B755F; --grow:#4C7EDC;}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif;background:#fff;color:var(--ink)}
header{position:sticky;top:0;background:var(--brand);color:#fff;padding:12px 16px;z-index:2}
header h1{margin:0;font-size:16px;text-align:center}
.nav{display:flex;gap:8px;justify-content:center;margin-top:8px;flex-wrap:wrap}
.nav a{color:#fff;text-decoration:none;opacity:.9;padding:4px 8px;border-radius:8px;border:1px solid transparent}
.nav a.active{opacity:1;border-color:#fff}
.wrap{max-width:860px;margin:0 auto;padding:16px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:14px;box-shadow:0 1px 2px rgba(0,0,0,.04)}
.card h3{margin:.2rem 0 .3rem}
.pill{display:inline-flex;align-items:center;gap:6px;background:var(--beige);color:var(--brand);padding:4px 8px;border-radius:999px;font-size:12px}
.btn{display:inline-block;background:var(--brand);color:#fff;border:0;border-radius:10px;padding:12px 16px;font-weight:700;text-decoration:none;cursor:pointer}
.btn.ghost{background:transparent;color:var(--brand);border:2px solid var(--brand)}
.btn.subtle{background:#eef1f0;color:var(--brand)}
footer{padding:24px;color:#666;text-align:center;font-size:12px}

/* Inputs */
textarea,input[type="text"]{width:100%;border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:15px;background:#fff}
textarea{min-height:84px;resize:vertical}

/* Compass */
.compass-wrap{display:flex;flex-direction:column;align-items:center}
svg.compass{width:340px;max-width:92vw;height:auto;display:block}
.compass text{font-weight:800;letter-spacing:.2px}
.center-tip{color:var(--muted);text-align:center;font-size:14px;margin:6px 0 12px}

/* Mode buttons */
.mode-buttons{display:grid;grid-template-columns:repeat(2,minmax(140px,1fr));gap:10px;max-width:420px;margin:0 auto 8px}
.mode-btn{display:flex;align-items:center;justify-content:center;border-radius:12px;padding:12px 10px;font-weight:700;border:2px solid transparent;cursor:pointer}
.mode-btn span{font-size:16px}
.mode-btn.surv{background:#F7E5E5;border-color:var(--surv);color:var(--surv)}
.mode-btn.drift{background:#FFF0D5;border-color:var(--drift);color:var(--drift)}
.mode-btn.ground{background:#E6F0EC;border-color:var(--ground);color:var(--ground)}
.mode-btn.grow{background:#E6EEFF;border-color:var(--grow);color:var(--grow)}
.mode-btn:active{transform:scale(.98)}

/* Instruction panel */
.instructions{max-width:520px;margin:12px auto 4px;border-left:4px solid var(--brand);padding:12px 14px;background:#fafafa;border-radius:8px}
.instructions h2{margin:0 0 6px;font-size:20px;color:var(--brand)}
.instructions p{margin:4px 0 8px}

/* Welcome popup */
#popup{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;z-index:10}
#popup .box{background:#fff;color:var(--brand);padding:22px;border-radius:12px;max-width:340px;text-align:center;border:1px solid var(--border)}
#popup .box p{margin:.5rem 0}

/* History */
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
.badge{display:inline-block;border:1px solid var(--border);padding:3px 8px;border-radius:999px;font-size:12px;color:var(--muted)}
.log-item{border-bottom:1px dashed var(--border);padding:10px 0}
.log-item:last-child{border-bottom:0}
.note{white-space:pre-wrap}
</style>
</head>
<body>
<header>
  <h1>The Reset Compass</h1>
  <div class="nav">
    <a id="nav-home" href="#/home">Compass</a>
    <a id="nav-wins" href="#/wins">Quick Wins</a>
    <a id="nav-history" href="#/history">History</a>
    <a id="nav-about" href="#/about">About</a>
  </div>
</header>

<div class="wrap" id="app"></div>

<footer>© 2025 Evolution of Wellness LLC • v1.0.0 • For educational purposes only. Not medical advice.</footer>

<script type="module">
/* ---------- DATA ---------- */
const Modes=[{id:1,name:'Surviving',desc:"When you’re running on empty. Use the simplest resets that bring you back to life.",color:'#A94747',icon:'🩺'},
{id:2,name:'Drifting',desc:'You’re okay but unfocused. Gently reconnect with what matters.',color:'#E6B450',icon:'🧭'},
{id:3,name:'Grounded',desc:'You’re stable and want steady progress without burnout.',color:'#3B755F',icon:'🌿'},
{id:4,name:'Growing',desc:'You’re ready to expand capacity intentionally and celebrate progress.',color:'#4C7EDC',icon:'🚀'}];

const Tools=[
{id:1,mode_id:1,name:'The 3-Minute Reset',tag:'Quick mental + physical reboot',icon:'⏱️',summary:'Interrupt shutdown with one fast, full-body reset.',instructions:'1) Pause. 2) Breathe in 3s / out 6s for 2 minutes. 3) Seated reach + gentle twist for 1 minute.'},
{id:2,mode_id:1,name:'The Bare Minimum Menu',tag:'Eat simply when energy is low',icon:'🍎',summary:'Choose 1 protein + 1 carb + 1 fruit/veg you already have.',instructions:'Examples: eggs+toast+apple; yogurt+granola+berries; rotisserie chicken+rice+bagged salad. Pick one and eat.'},
{id:3,mode_id:1,name:'Your Energy Budget',tag:'Spend your energy wisely',icon:'⚡',summary:'Allocate today into Must / Might / No. Protect your limited fuel.',instructions:'Fill “Must” first (max 3 items). If energy rises, do one “Might.” Everything else = “No” today.'},
{id:4,mode_id:2,name:'The Attention Anchor',tag:'Refocus scattered energy',icon:'🎯',summary:'Pick one word for how you want to feel today.',instructions:'Choose a word (Calm / Clear / Steady / Present / Light). Say it aloud. Return to it when distracted.'},
{id:5,mode_id:2,name:'The Daily Reconnect',tag:'One prompt, one minute',icon:'📝',summary:'Stay present with a single honest sentence.',instructions:'Pick a prompt: “What gave me energy?” / “What felt easiest?” / “What did I avoid?” Say or write one honest line.'},
{id:6,mode_id:2,name:'The Weekly Waypoint',tag:'Give your week direction',icon:'📅',summary:'A 5-minute reset on your natural week start.',instructions:'1) Name your current mode. 2) Choose one weekly anchor (e.g., outside 3×). 3) Set a reminder for next check-in.'},
{id:7,mode_id:3,name:'The Energy Multiplier',tag:'Get more from what you already do',icon:'🔋',summary:'Identify 1–3 actions that give you energy and repeat them.',instructions:'List what already helps (sunlight, short walk, earlier lights). Repeat daily this week.'},
{id:8,mode_id:3,name:'The Habit Reflector',tag:'Notice what’s working',icon:'🪞',summary:'Weekly 3-min scan to protect helpful routines.',instructions:'Write: 1) What felt good? 2) Pattern to repeat? 3) What throws me off? Add one guardrail.'},
{id:9,mode_id:3,name:'Keystone Habit Builder',tag:'One small habit, big ripple',icon:'🧱',summary:'Choose one keystone habit and make it automatic.',instructions:'Use: “After I [trigger], I will [habit] in [location].” Check it off each day.'},
{id:10,mode_id:3,name:'Boundary Booster',tag:'Protect your energy + focus',icon:'🛡️',summary:'Keep growth from getting hijacked by distractions.',instructions:'Pick 3 priorities + 2 mini-boundaries. Write a reminder: “My energy is worth protecting because…” Optional daily check.'},
{id:11,mode_id:4,name:'The Expansion Map',tag:'Grow with intention',icon:'🌱',summary:'Define one area to expand, one to sustain, one to rest.',instructions:'Choose: Expand (e.g., movement minutes), Sustain (sleep window), Rest (pause an obligation). Review weekly.'},
{id:12,mode_id:4,name:'Skill Sprint',tag:'10-day micro-upgrade',icon:'🚴',summary:'A tiny, focused sprint that raises your ceiling without burnout.',instructions:'Pick one 10-minute skill or habit (mobility, meal prep, breathwork). Daily: start timer, do 10 min, mark done.'},
{id:13,mode_id:4,name:'Progress Pulse',tag:'Celebrate and iterate',icon:'📈',summary:'Quick weekly review to lock in gains and decide the next nudge.',instructions:'Log: Best win, Biggest drain, One tweak for next week. End with: “Next nudge = ____.”'},
{id:14,mode_id:4,name:'Social Support Loop',tag:'Don’t grow alone',icon:'🤝',summary:'Light accountability with one person.',instructions:'Choose a buddy. Agree on one weekly touch (Fri text / Sun walk). Add reminder. Celebrate small wins.'},
];

const QuickWins=[
 {title:'Drink water',desc:'One full glass now. Feel the shift.',icon:'💧'},
 {title:'Step outside',desc:'3 minutes of daylight or fresh air.',icon:'🌞'},
 {title:'Stretch overhead',desc:'30 seconds. Shoulders down, jaw loose.',icon:'🤸'},
 {title:'Phone-free pause',desc:'Put it in another room for 5 minutes.',icon:'📵'},
 {title:'Tidy one surface',desc:'Desk, bag, or car door pocket.',icon:'🧽'},
 {title:'Message a friend',desc:'One genuine check-in.',icon:'💬'}
];

/* ---------- HELPERS ---------- */
const app=document.getElementById('app');
const go=(h)=>location.hash=h;
const setActive=()=>{
  document.querySelectorAll('.nav a').forEach(a=>a.classList.remove('active'));
  const map={'#/home':'nav-home','#/wins':'nav-wins','#/about':'nav-about','#/history':'nav-history'};
  (document.getElementById(map[location.hash]||'nav-home')||{}).classList?.add('active');
};
const getLogs=()=>JSON.parse(localStorage.getItem('rc_logs')||'[]');
const saveLogs=(arr)=>localStorage.setItem('rc_logs',JSON.stringify(arr));
const addLog=({mode,tool,note})=>{
  const arr=getLogs();
  arr.push({ts:new Date().toISOString(),mode,tool,note:(note||'').trim()});
  saveLogs(arr);
};
const formatTS=(iso)=>new Date(iso).toLocaleString();

/* ---------- VIEWS ---------- */
function Home(){
  setActive();
  app.innerHTML = `
    <div class="card instructions" style="text-align:left">
      <h2>How are you feeling today?</h2>
      <p style="font-size:15px;color:var(--muted);margin:4px 0 10px">
        Choose the mode that best matches your current energy. Then open one quick tool to reset or refocus.
      </p>
      <ul style="margin:0;padding-left:18px;list-style:disc">
        <li style="margin:.35rem 0"><b style="color:var(--surv)">🩺 Surviving</b> — running on empty</li>
        <li style="margin:.35rem 0"><b style="color:var(--drift)">🧭 Drifting</b> — okay but unfocused</li>
        <li style="margin:.35rem 0"><b style="color:var(--ground)">🌿 Grounded</b> — steady and consistent</li>
        <li style="margin:.35rem 0"><b style="color:var(--grow)">🚀 Growing</b> — ready to push a little</li>
      </ul>
      <p style="margin-top:10px;font-weight:700;color:var(--brand)">
        Not sure? Start with <span style="color:var(--drift)">Drifting</span>.
      </p>
    </div>

    <div class="compass-wrap">
      <svg class="compass" viewBox="0 0 200 200" aria-label="Mode Compass">
        <defs>
          <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="1" stdDeviation="1" flood-opacity=".2"/>
          </filter>
        </defs>
        <circle cx="100" cy="100" r="96" fill="#fff" stroke="var(--brand)" stroke-width="3" filter="url(#softShadow)"/>
        <path d="M100,100 L100,4 A96,96 0 0,1 196,100 Z" fill="var(--surv)"  opacity=".18" onclick="location.hash='#/mode/1'"></path>
        <path d="M100,100 L196,100 A96,96 0 0,1 100,196 Z" fill="var(--drift)" opacity=".18" onclick="location.hash='#/mode/2'"></path>
        <path d="M100,100 L100,196 A96,96 0 0,1 4,100 Z"  fill="var(--ground)" opacity=".18" onclick="location.hash='#/mode/3'"></path>
        <path d="M100,100 L4,100 A96,96 0 0,1 100,4 Z"   fill="var(--grow)"  opacity=".18" onclick="location.hash='#/mode/4'"></path>
        <circle cx="100" cy="100" r="7" fill="var(--brand)"></circle>
        <text x="100" y="18"  text-anchor="middle" fill="var(--surv)"  font-size="12">Surviving</text>
        <text x="182"  y="104" text-anchor="end"    fill="var(--drift)" font-size="12">Drifting</text>
        <text x="100" y="188" text-anchor="middle" fill="var(--ground)" font-size="12">Grounded</text>
        <text x="18"  y="104" text-anchor="start"  fill="var(--grow)"  font-size="12">Growing</text>
      </svg>
      <p class="center-tip">Tap a wedge or use the buttons below.</p>
    </div>

    <div class="mode-buttons">
      <div class="mode-btn surv"   onclick="location.hash='#/mode/1'"><span>🩺 Surviving</span></div>
      <div class="mode-btn drift"  onclick="location.hash='#/mode/2'"><span>🧭 Drifting</span></div>
      <div class="mode-btn ground" onclick="location.hash='#/mode/3'"><span>🌿 Grounded</span></div>
      <div class="mode-btn grow"   onclick="location.hash='#/mode/4'"><span>🚀 Growing</span></div>
    </div>
  `;
}

function ModeView(id){
  setActive();
  const m=Modes.find(x=>x.id==id); if(!m){go('#/home');return}
  const list=Tools.filter(t=>t.mode_id==m.id);
  app.innerHTML=`
    <div class="pill" style="margin-bottom:8px;background:${m.color}20;color:${m.color}">${m.icon} ${m.name}</div>
    <h2>${m.name}</h2>
    <p class="muted" style="margin-top:-6px">${m.desc}</p>
    <div class="grid">
      ${list.map(t=>`
        <div class="card">
          <div class="pill">${t.icon} ${t.tag}</div>
          <h3>${t.name}</h3>
          <p class="muted">${t.summary}</p>
          <div style="height:8px"></div>
          <a class="btn" href="#/tool/${t.id}">Open</a>
        </div>`).join('')}
    </div>
    <div style="height:12px"></div>
    <a class="btn ghost" href="#/home">Back to Compass</a>
  `;
}

function ToolView(id){
  setActive();
  const t=Tools.find(x=>x.id==id); if(!t){go('#/home');return}
  const m=Modes.find(x=>x.id==t.mode_id);
  app.innerHTML=`
    <div class="pill" style="margin-bottom:8px;background:${m.color}20;color:${m.color}">${m.icon} ${m.name}</div>
    <h2>${t.icon} ${t.name}</h2>
    <div class="card"><p class="muted">${t.summary}</p></div>

    <div class="card">
      <h3>How to use</h3>
      <ul style="margin:0;padding-left:18px">${t.instructions.split('. ').map(s=>s.trim()).filter(Boolean).map(s=>`<li>${s.replace(/\.$/,'')}.</li>`).join('')}</ul>
    </div>

    <div class="card">
      <h3>Write a quick note (optional)</h3>
      <p class="muted" style="margin-top:-6px">One sentence is enough. You’ll see it in your History.</p>
      <textarea id="noteBox" placeholder="What did you do or notice? (e.g., ‘2-min breath—felt calmer.’)"></textarea>
      <div style="height:10px"></div>
      <button class="btn" id="saveAndLog">Save note + Did it ✅</button>
      <button class="btn subtle" id="logOnly" style="margin-left:8px">Did it ✅ (no note)</button>
      <a class="btn ghost" style="margin-left:8px" href="#/mode/${m.id}">Back</a>
    </div>
  `;

  const noteEl=document.getElementById('noteBox');
  document.getElementById('saveAndLog').onclick=()=>{
    addLog({mode:m.name,tool:t.name,note:noteEl.value});
    alert('Saved to History! ✅');
  };
  document.getElementById('logOnly').onclick=()=>{
    addLog({mode:m.name,tool:t.name,note:''});
    alert('Logged! ✅');
  };
}

function Wins(){
  setActive();
  const logs=getLogs().slice(-10).reverse();
  app.innerHTML=`
    <h2>Quick Wins</h2>
    <div class="grid">
      ${QuickWins.map(w=>`<div class="card"><div class="pill">${w.icon} Quick Win</div><h3>${w.title}</h3><p class="muted">${w.desc}</p></div>`).join('')}
    </div>
    <div style="height:12px"></div>
    <div class="card">
      <strong>Recent logs</strong>
      ${logs.length?`<ul style="margin:8px 0 0 18px">${logs.map(l=>`<li>${formatTS(l.ts)} — <strong>${l.tool}</strong> (${l.mode}) ${l.note?`— ${l.note.replace(/</g,'&lt;')}`:''}</li>`).join('')}</ul>`:`<p class="muted">No logs yet.</p>`}
      <div style="height:10px"></div>
      <a class="btn ghost" href="#/home">Back to Compass</a>
    </div>
  `;
}

function History(){
  setActive();
  const logs=getLogs().reverse(); // newest first
  const uniqueModes=['All','Surviving','Drifting','Grounded','Growing'];
  app.innerHTML=`
    <h2>History</h2>
    <div class="card">
      <div class="filters">
        <select id="modeFilter">
          ${uniqueModes.map(m=>`<option value="${m}">${m}</option>`).join('')}
        </select>
        <input type="text" id="searchBox" placeholder="Search notes or tools"/>
        <span class="badge">${logs.length} entries</span>
        <button class="btn ghost" id="clearLogs">Clear All</button>
      </div>
      <div id="logList">
        ${renderLogs(logs)}
      </div>
      <div style="height:10px"></div>
      <a class="btn ghost" href="#/home">Back to Compass</a>
    </div>
  `;
  document.getElementById('clearLogs').onclick=()=>{
    if(confirm('Clear all local history on this device?')){ saveLogs([]); History(); }
  };
  document.getElementById('modeFilter').onchange = applyFilters;
  document.getElementById('searchBox').oninput = applyFilters;

  function applyFilters(){
    const mf=document.getElementById('modeFilter').value;
    const q=(document.getElementById('searchBox').value||'').toLowerCase();
    const filtered=logs.filter(l=>{
      const mOk=(mf==='All'||l.mode===mf);
      const qOk=(!q || (l.tool.toLowerCase().includes(q) || (l.note||'').toLowerCase().includes(q)));
      return mOk && qOk;
    });
    document.getElementById('logList').innerHTML=renderLogs(filtered);
  }
}
function renderLogs(list){
  if(!list.length) return `<p class="muted">No entries yet.</p>`;
  return list.map(l=>`
    <div class="log-item">
      <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div><strong>${l.tool}</strong> <span class="badge">${l.mode}</span></div>
        <div class="muted" style="font-size:12px">${formatTS(l.ts)}</div>
      </div>
      ${l.note?`<div class="note" style="margin-top:6px">${(l.note||'').replace(/</g,'&lt;')}</div>`:''}
    </div>
  `).join('');
}

function About(){
  setActive();
  app.innerHTML=`
    <h2>About</h2>
    <div class="card">
      <p><strong>The Reset Compass</strong> helps you take your health into your own hands immediately. Choose your current mode to see quick, realistic steps that match your energy today.</p>
      <p class="muted" style="font-size:12px">Disclaimer: This companion is for educational purposes only and is not medical advice. Consult a qualified provider before making changes to your health routine.</p>
      <p class="muted" style="font-size:12px">Support: evolutionofwellness8@gmail.com</p>
      <a class="btn ghost" href="#/home">Back to Compass</a>
    </div>
  `;
}

/* ---------- ROUTER & INIT ---------- */
function router(){
  const r=location.hash.replace('#','')||'/home';
  if(r.startsWith('/mode/')) return ModeView(r.split('/')[2]);
  if(r.startsWith('/tool/')) return ToolView(r.split('/')[2]);
  if(r==='/wins') return Wins();
  if(r==='/history') return History();
  if(r==='/about') return About();
  return Home();
}
window.addEventListener('hashchange',router);
window.addEventListener('load',()=>{
  router();
  if(!localStorage.getItem('welcomeSeen')){
    const el=document.createElement('div');
    el.id='popup';
    el.innerHTML=`<div class="box">
      <h3>Welcome to The Reset Compass</h3>
      <p>This simple tool helps you take your health into your own hands immediately.<br>Choose your current mode to see quick, realistic steps that match your energy today.</p>
      <button class="btn" id="startBtn">Let's Start</button>
      <p style="font-size:12px;color:#6b6b6b;margin:6px 0 0">Your progress is saved locally on this device.</p>
    </div>`;
    document.body.appendChild(el);
    document.getElementById('startBtn').onclick=()=>{localStorage.setItem('welcomeSeen','true');el.remove();}
  }
  if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js').catch(()=>{});}
});
</script>
</body>
</html>
